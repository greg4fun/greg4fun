<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="../assets/xml/rss.xsl" media="all"?><rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Greg's Tech Notes (Posts about DevOps)</title><link>https://stencel.io/</link><description></description><atom:link href="https://stencel.io/categories/cat_devops.xml" rel="self" type="application/rss+xml"></atom:link><language>en</language><copyright>Contents Â© 2023 &lt;a href="mailto:gstencel@gmail.com"&gt;Greg Stencel&lt;/a&gt; </copyright><lastBuildDate>Sat, 06 May 2023 20:05:03 GMT</lastBuildDate><generator>Nikola (getnikola.com)</generator><docs>http://blogs.law.harvard.edu/tech/rss</docs><item><title>fabric - auto deployment script</title><link>https://stencel.io/posts/fabric-auto-deployment-script.html</link><dc:creator>Greg Stencel</dc:creator><description>&lt;p&gt;Recently I wrote fabric deployment scrip maybe someone will find it usefull.&lt;/p&gt;
&lt;p&gt;It enables possibility to run "group execute" task with&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre class="code python"&gt;&lt;a id="rest_code_950191822ebd4961a83a488a73593d7d-1" name="rest_code_950191822ebd4961a83a488a73593d7d-1" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_950191822ebd4961a83a488a73593d7d-1"&gt;&lt;/a&gt;&lt;span class="n"&gt;fab&lt;/span&gt; &lt;span class="n"&gt;live_servers&lt;/span&gt; &lt;span class="n"&gt;pull&lt;/span&gt; &lt;span class="n"&gt;restart&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;or single host&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre class="code python"&gt;&lt;a id="rest_code_29fb542a372f4dd3bfe4717ba330b648-1" name="rest_code_29fb542a372f4dd3bfe4717ba330b648-1" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_29fb542a372f4dd3bfe4717ba330b648-1"&gt;&lt;/a&gt;&lt;span class="n"&gt;fab&lt;/span&gt; &lt;span class="n"&gt;live1&lt;/span&gt; &lt;span class="n"&gt;pull&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;All we need to do is to define group or sinle host as function afterwards I used end update decorator.&lt;/p&gt;
&lt;p&gt;I know there could be also something like duplication of tasks with separate servers fab live1 pull live2
pull but I believe that fabric was written for distributed systems which has different paths of apps and users
etc.&lt;/p&gt;
&lt;p&gt;also roledefs with extra dict keys didn't work for me)? I want to keep this simple single/multiple host
deployment commands like : fab live_servers pull, fab test pull&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre class="code python"&gt;&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-1" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-1" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-1"&gt;&lt;/a&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;fabric.api&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;run&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;env&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;local&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;cd&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-2" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-2" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-2"&gt;&lt;/a&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;fabric.tasks&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;execute&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-3" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-3" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-3"&gt;&lt;/a&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;inspect&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-4" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-4" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-4"&gt;&lt;/a&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;sys&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-5" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-5" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-5"&gt;&lt;/a&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;os&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-6" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-6" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-6"&gt;&lt;/a&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;re&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-7" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-7" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-7"&gt;&lt;/a&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;StringIO&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;StringIO&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-8" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-8" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-8"&gt;&lt;/a&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-9" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-9" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-9"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# fabfile author: Grzegorz Stencel&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-10" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-10" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-10"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# usage:&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-11" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-11" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-11"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# run: fab help for examples&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-12" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-12" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-12"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# fab staging svnxapp:app=holdings_and_quotes,layout.py,permissions.py restart&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-13" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-13" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-13"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# fab test svnxlib&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-14" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-14" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-14"&gt;&lt;/a&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-15" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-15" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-15"&gt;&lt;/a&gt;&lt;span class="n"&gt;SERVER_BRANCHES&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-16" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-16" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-16"&gt;&lt;/a&gt;    &lt;span class="s1"&gt;'live'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'master'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-17" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-17" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-17"&gt;&lt;/a&gt;    &lt;span class="s1"&gt;'sit'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'sit'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-18" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-18" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-18"&gt;&lt;/a&gt;    &lt;span class="s1"&gt;'uat'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'uat'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-19" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-19" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-19"&gt;&lt;/a&gt;    &lt;span class="s1"&gt;'live2'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="s1"&gt;'master'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-20" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-20" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-20"&gt;&lt;/a&gt;    &lt;span class="s1"&gt;'live3'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="s1"&gt;'master'&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-21" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-21" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-21"&gt;&lt;/a&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-22" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-22" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-22"&gt;&lt;/a&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-23" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-23" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-23"&gt;&lt;/a&gt;&lt;span class="c1"&gt;# MAIN CONF&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-24" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-24" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-24"&gt;&lt;/a&gt;&lt;span class="n"&gt;SERVERS&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-25" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-25" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-25"&gt;&lt;/a&gt;    &lt;span class="s1"&gt;'local'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-26" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-26" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-26"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'envname'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'local'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-27" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-27" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-27"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'user'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'greg'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-28" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-28" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-28"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'host'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'localhost'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-29" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-29" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-29"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'host_string'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'localhost'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-30" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-30" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-30"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'path'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;environ&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'SITE_ROOT'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'/opt/myapp/test'&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-31" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-31" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-31"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'www_root'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'http://localhost:8081/'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-32" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-32" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-32"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'retries_before_killing'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-33" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-33" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-33"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'retry_sleep'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-34" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-34" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-34"&gt;&lt;/a&gt;    &lt;span class="p"&gt;},&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-35" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-35" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-35"&gt;&lt;/a&gt;    &lt;span class="s1"&gt;'test'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-36" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-36" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-36"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'envname'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'test'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-37" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-37" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-37"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'user'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'root'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-38" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-38" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-38"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'host'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'myapp-test.stencel.com'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-39" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-39" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-39"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'host_string'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'myapp-test.stencel.com'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-40" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-40" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-40"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'path'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'/var/www/myapp/test/'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-41" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-41" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-41"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'www_root'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'http://myapp-test.stencel.com/'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-42" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-42" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-42"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'retries_before_killing'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-43" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-43" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-43"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'retry_sleep'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-44" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-44" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-44"&gt;&lt;/a&gt;    &lt;span class="p"&gt;},&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-45" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-45" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-45"&gt;&lt;/a&gt;    &lt;span class="s1"&gt;'uat'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-46" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-46" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-46"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'envname'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'uat'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-47" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-47" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-47"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'user'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'myapp'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-48" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-48" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-48"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'host'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'uat.myapp2.stencel.com'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-49" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-49" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-49"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'host_string'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'uat.myapp2.stencel.com'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-50" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-50" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-50"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'key_filename'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'deploy/keys/id_rsa'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-51" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-51" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-51"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'path'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'/opt/myapp/uat/'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-52" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-52" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-52"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'www_root'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'http://uat.myapp2.stencel.com/'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-53" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-53" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-53"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'retries_before_killing'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-54" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-54" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-54"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'retry_sleep'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-55" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-55" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-55"&gt;&lt;/a&gt;    &lt;span class="p"&gt;},&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-56" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-56" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-56"&gt;&lt;/a&gt;    &lt;span class="s1"&gt;'sit'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-57" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-57" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-57"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'envname'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'sit'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-58" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-58" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-58"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'user'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'myapp'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-59" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-59" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-59"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'host'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'sit.myapp2.stencel.com'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-60" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-60" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-60"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'host_string'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'sit.myapp2.stencel.com'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-61" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-61" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-61"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'key_filename'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'deploy/keys/id_rsa'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-62" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-62" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-62"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'path'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'/opt/myapp/sit/'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-63" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-63" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-63"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'www_root'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'http://sit.myapp2.stencel.com/'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-64" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-64" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-64"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'retries_before_killing'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-65" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-65" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-65"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'retry_sleep'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-66" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-66" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-66"&gt;&lt;/a&gt;    &lt;span class="p"&gt;},&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-67" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-67" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-67"&gt;&lt;/a&gt;    &lt;span class="s1"&gt;'live'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-68" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-68" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-68"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'envname'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'live'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-69" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-69" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-69"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'user'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'myapp'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-70" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-70" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-70"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'host'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'10.10.10.10'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-71" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-71" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-71"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'host_string'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'myapp2.stencel.com'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-72" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-72" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-72"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'path'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'/opt/myapp/live/'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-73" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-73" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-73"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'www_root'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'http://myapp2.stencel.com/'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-74" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-74" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-74"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'retries_before_killing'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-75" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-75" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-75"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'retry_sleep'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-76" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-76" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-76"&gt;&lt;/a&gt;    &lt;span class="p"&gt;},&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-77" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-77" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-77"&gt;&lt;/a&gt;    &lt;span class="s1"&gt;'live2'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-78" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-78" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-78"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'envname'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'live2'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-79" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-79" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-79"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'user'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'root'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-80" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-80" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-80"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'host'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'10.10.10.11'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-81" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-81" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-81"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'host_string'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'live2.stencel.com'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-82" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-82" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-82"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'path'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'/var/www/myapp/live/'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-83" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-83" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-83"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'www_root'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'http://myapp2.stencel.com/'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-84" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-84" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-84"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'retries_before_killing'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-85" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-85" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-85"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'retry_sleep'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-86" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-86" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-86"&gt;&lt;/a&gt;    &lt;span class="p"&gt;},&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-87" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-87" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-87"&gt;&lt;/a&gt;    &lt;span class="s1"&gt;'live3'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-88" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-88" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-88"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'envname'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'live3'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-89" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-89" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-89"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'user'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'root'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-90" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-90" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-90"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'host'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'10.10.10.12'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-91" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-91" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-91"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'host_string'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'live3.stencel.com'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-92" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-92" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-92"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'path'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'/var/www/myapp/live/'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-93" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-93" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-93"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'www_root'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;'http://myapp2.stencel.com/'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-94" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-94" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-94"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'retries_before_killing'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-95" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-95" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-95"&gt;&lt;/a&gt;        &lt;span class="s1"&gt;'retry_sleep'&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-96" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-96" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-96"&gt;&lt;/a&gt;    &lt;span class="p"&gt;},&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-97" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-97" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-97"&gt;&lt;/a&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-98" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-98" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-98"&gt;&lt;/a&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-99" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-99" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-99"&gt;&lt;/a&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-100" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-100" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-100"&gt;&lt;/a&gt;&lt;span class="n"&gt;LIVE_HOSTS&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;'live'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'live2'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'live3'&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-101" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-101" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-101"&gt;&lt;/a&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-102" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-102" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-102"&gt;&lt;/a&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-103" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-103" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-103"&gt;&lt;/a&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;list_hosts&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-104" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-104" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-104"&gt;&lt;/a&gt;    &lt;span class="sd"&gt;"""&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-105" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-105" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-105"&gt;&lt;/a&gt;&lt;span class="sd"&gt;    Lists available myapp hosts&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-106" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-106" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-106"&gt;&lt;/a&gt;&lt;span class="sd"&gt;    """&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-107" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-107" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-107"&gt;&lt;/a&gt;    &lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="s2"&gt;" Single hosts(if you want to pull from svn only to one of them):"&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-108" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-108" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-108"&gt;&lt;/a&gt;    &lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="s1"&gt;'   &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s1"&gt;'&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="s1"&gt;'&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s1"&gt;   '&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;join&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;SERVERS&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-109" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-109" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-109"&gt;&lt;/a&gt;    &lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="s2"&gt;" Multiple hosts"&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-110" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-110" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-110"&gt;&lt;/a&gt;    &lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="s1"&gt;'   live (which contains &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s1"&gt;)'&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="s1"&gt;','&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;join&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;LIVE_HOSTS&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-111" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-111" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-111"&gt;&lt;/a&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-112" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-112" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-112"&gt;&lt;/a&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-113" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-113" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-113"&gt;&lt;/a&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;test&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-114" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-114" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-114"&gt;&lt;/a&gt;    &lt;span class="sd"&gt;"""&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-115" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-115" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-115"&gt;&lt;/a&gt;&lt;span class="sd"&gt;    single host definition , "fab test restart" wil restart this one host&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-116" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-116" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-116"&gt;&lt;/a&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-117" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-117" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-117"&gt;&lt;/a&gt;&lt;span class="sd"&gt;    """&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-118" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-118" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-118"&gt;&lt;/a&gt;    &lt;span class="n"&gt;env&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;update&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;dict&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;SERVERS&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;'test'&lt;/span&gt;&lt;span class="p"&gt;]))&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-119" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-119" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-119"&gt;&lt;/a&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-120" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-120" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-120"&gt;&lt;/a&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-121" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-121" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-121"&gt;&lt;/a&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;localhost&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-122" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-122" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-122"&gt;&lt;/a&gt;    &lt;span class="sd"&gt;"""&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-123" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-123" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-123"&gt;&lt;/a&gt;&lt;span class="sd"&gt;    single host definition , "fab test restart" wil restart this one host&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-124" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-124" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-124"&gt;&lt;/a&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-125" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-125" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-125"&gt;&lt;/a&gt;&lt;span class="sd"&gt;    """&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-126" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-126" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-126"&gt;&lt;/a&gt;    &lt;span class="n"&gt;env&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;update&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;dict&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;SERVERS&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;'local'&lt;/span&gt;&lt;span class="p"&gt;]))&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-127" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-127" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-127"&gt;&lt;/a&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-128" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-128" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-128"&gt;&lt;/a&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-129" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-129" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-129"&gt;&lt;/a&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;uat&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-130" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-130" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-130"&gt;&lt;/a&gt;    &lt;span class="sd"&gt;"""&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-131" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-131" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-131"&gt;&lt;/a&gt;&lt;span class="sd"&gt;    single host definition , "fab uat restart" wil restart this single host&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-132" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-132" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-132"&gt;&lt;/a&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-133" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-133" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-133"&gt;&lt;/a&gt;&lt;span class="sd"&gt;    """&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-134" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-134" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-134"&gt;&lt;/a&gt;    &lt;span class="n"&gt;env&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;update&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;dict&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;SERVERS&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;'uat'&lt;/span&gt;&lt;span class="p"&gt;]))&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-135" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-135" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-135"&gt;&lt;/a&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-136" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-136" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-136"&gt;&lt;/a&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-137" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-137" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-137"&gt;&lt;/a&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;sit&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-138" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-138" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-138"&gt;&lt;/a&gt;    &lt;span class="sd"&gt;"""&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-139" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-139" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-139"&gt;&lt;/a&gt;&lt;span class="sd"&gt;    single host&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-140" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-140" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-140"&gt;&lt;/a&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-141" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-141" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-141"&gt;&lt;/a&gt;&lt;span class="sd"&gt;    """&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-142" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-142" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-142"&gt;&lt;/a&gt;    &lt;span class="n"&gt;env&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;update&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;dict&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;SERVERS&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;'sit'&lt;/span&gt;&lt;span class="p"&gt;]))&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-143" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-143" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-143"&gt;&lt;/a&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-144" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-144" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-144"&gt;&lt;/a&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-145" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-145" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-145"&gt;&lt;/a&gt;&lt;span class="c1"&gt;#  SERVERS GRcompanyS DEFINITION&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-146" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-146" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-146"&gt;&lt;/a&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;live&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-147" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-147" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-147"&gt;&lt;/a&gt;    &lt;span class="sd"&gt;"""&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-148" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-148" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-148"&gt;&lt;/a&gt;&lt;span class="sd"&gt;    multiple grcompany of hosts - running: "fab live restart" will restart all live servers&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-149" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-149" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-149"&gt;&lt;/a&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-150" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-150" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-150"&gt;&lt;/a&gt;&lt;span class="sd"&gt;    """&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-151" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-151" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-151"&gt;&lt;/a&gt;    &lt;span class="n"&gt;env&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;'hosts'&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;SERVERS&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;][&lt;/span&gt;&lt;span class="s1"&gt;'host'&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;LIVE_HOSTS&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-152" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-152" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-152"&gt;&lt;/a&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-153" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-153" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-153"&gt;&lt;/a&gt;    &lt;span class="c1"&gt;# env.update(dict(SERVERS['staging']))&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-154" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-154" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-154"&gt;&lt;/a&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-155" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-155" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-155"&gt;&lt;/a&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-156" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-156" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-156"&gt;&lt;/a&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;env_update&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;func&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-157" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-157" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-157"&gt;&lt;/a&gt;    &lt;span class="sd"&gt;"""&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-158" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-158" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-158"&gt;&lt;/a&gt;&lt;span class="sd"&gt;    Decorator - needs to be added to each task in fabricfile - for multiple host task execution&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-159" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-159" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-159"&gt;&lt;/a&gt;&lt;span class="sd"&gt;    """&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-160" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-160" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-160"&gt;&lt;/a&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-161" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-161" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-161"&gt;&lt;/a&gt;    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;func_wrapper&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="n"&gt;kwargs&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-162" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-162" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-162"&gt;&lt;/a&gt;        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;env&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;hosts&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-163" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-163" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-163"&gt;&lt;/a&gt;            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;func&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="n"&gt;kwargs&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-164" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-164" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-164"&gt;&lt;/a&gt;        &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-165" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-165" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-165"&gt;&lt;/a&gt;            &lt;span class="n"&gt;env&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;update&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;dict&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;SERVERS&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="nb"&gt;filter&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;lambda&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;SERVERS&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;][&lt;/span&gt;&lt;span class="s1"&gt;'host'&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;env&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;host&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;MyApp_SERVERS&lt;/span&gt;&lt;span class="p"&gt;)[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]]))&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-166" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-166" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-166"&gt;&lt;/a&gt;            &lt;span class="n"&gt;func&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="n"&gt;kwargs&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-167" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-167" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-167"&gt;&lt;/a&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-168" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-168" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-168"&gt;&lt;/a&gt;    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;func_wrapper&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-169" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-169" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-169"&gt;&lt;/a&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-170" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-170" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-170"&gt;&lt;/a&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-171" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-171" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-171"&gt;&lt;/a&gt;&lt;span class="nd"&gt;@env_update&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-172" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-172" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-172"&gt;&lt;/a&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;bundle_media&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-173" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-173" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-173"&gt;&lt;/a&gt;    &lt;span class="sd"&gt;"""&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-174" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-174" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-174"&gt;&lt;/a&gt;&lt;span class="sd"&gt;    bundles media like css and js to one file.&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-175" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-175" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-175"&gt;&lt;/a&gt;&lt;span class="sd"&gt;    example:&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-176" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-176" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-176"&gt;&lt;/a&gt;&lt;span class="sd"&gt;        fab test bundle_media&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-177" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-177" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-177"&gt;&lt;/a&gt;&lt;span class="sd"&gt;    """&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-178" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-178" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-178"&gt;&lt;/a&gt;    &lt;span class="c1"&gt;# export DJANGO_SETTINGS_MODULE=settings&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-179" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-179" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-179"&gt;&lt;/a&gt;    &lt;span class="c1"&gt;#run("cd {0} &amp;amp;&amp;amp; source settings/{1}-config.sh &amp;amp;&amp;amp; python scripts/bundle_media.py".format(env.path,env.envname))&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-180" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-180" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-180"&gt;&lt;/a&gt;   &lt;span class="n"&gt;run&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"source /usr/share/virtualenvwrapper/virtualenvwrapper.sh &amp;amp;&amp;amp; workon &lt;/span&gt;&lt;span class="si"&gt;{0}&lt;/span&gt;&lt;span class="s2"&gt; &amp;amp;&amp;amp; python scripts/bundle_media.py"&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;-myapp"&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="n"&gt;env&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;envname&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;env&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;envname&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;gt;&lt;/span&gt; &lt;span class="s1"&gt;'live'&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="s1"&gt;'MyApp-test'&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; &lt;span class="c1"&gt;#change live venv to be live-MyApp&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-181" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-181" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-181"&gt;&lt;/a&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-182" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-182" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-182"&gt;&lt;/a&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;_valid_branch&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;env&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-183" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-183" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-183"&gt;&lt;/a&gt;    &lt;span class="n"&gt;branch&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;run&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"cd &lt;/span&gt;&lt;span class="si"&gt;{0}&lt;/span&gt;&lt;span class="s2"&gt; &amp;amp;&amp;amp; git rev-parse --abbrev-ref HEAD"&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;env&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-184" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-184" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-184"&gt;&lt;/a&gt;    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;branch&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;SERVER_BRANCHES&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;env&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;envname&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="ow"&gt;and&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="n"&gt;env&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;envname&lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;&lt;span class="s1"&gt;'local'&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-185" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-185" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-185"&gt;&lt;/a&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-186" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-186" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-186"&gt;&lt;/a&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-187" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-187" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-187"&gt;&lt;/a&gt;&lt;span class="nd"&gt;@env_update&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-188" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-188" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-188"&gt;&lt;/a&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;pull&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="n"&gt;kwargs&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-189" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-189" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-189"&gt;&lt;/a&gt;    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;_valid_branch&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;env&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-190" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-190" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-190"&gt;&lt;/a&gt;        &lt;span class="k"&gt;with&lt;/span&gt; &lt;span class="n"&gt;cd&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;env&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-191" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-191" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-191"&gt;&lt;/a&gt;            &lt;span class="n"&gt;run&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"git fetch origin"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-192" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-192" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-192"&gt;&lt;/a&gt;            &lt;span class="n"&gt;run&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"git reset --hard origin/&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;"&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="n"&gt;branch&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-193" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-193" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-193"&gt;&lt;/a&gt;    &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-194" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-194" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-194"&gt;&lt;/a&gt;        &lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="s2"&gt;"Error : Server is checked out to wrong branch!!!"&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-195" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-195" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-195"&gt;&lt;/a&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-196" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-196" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-196"&gt;&lt;/a&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-197" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-197" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-197"&gt;&lt;/a&gt;            &lt;span class="c1"&gt;#run('git fetch --quiet')&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-198" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-198" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-198"&gt;&lt;/a&gt;            &lt;span class="c1"&gt;#run('git fetch --tags --quiet')&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-199" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-199" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-199"&gt;&lt;/a&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-200" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-200" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-200"&gt;&lt;/a&gt;&lt;span class="nd"&gt;@env_update&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-201" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-201" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-201"&gt;&lt;/a&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;reload&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-202" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-202" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-202"&gt;&lt;/a&gt;    &lt;span class="sd"&gt;"""&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-203" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-203" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-203"&gt;&lt;/a&gt;&lt;span class="sd"&gt;    Reload specified servers - kills unused gunicorn workers but waits workers with old code to finish processing.&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-204" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-204" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-204"&gt;&lt;/a&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-205" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-205" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-205"&gt;&lt;/a&gt;&lt;span class="sd"&gt;    """&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-206" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-206" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-206"&gt;&lt;/a&gt;    &lt;span class="n"&gt;bundle_media&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-207" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-207" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-207"&gt;&lt;/a&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-208" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-208" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-208"&gt;&lt;/a&gt;    &lt;span class="c1"&gt;#if env.envname in ('uat', 'staging', 'live'):&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-209" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-209" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-209"&gt;&lt;/a&gt;    &lt;span class="n"&gt;f&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;StringIO&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-210" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-210" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-210"&gt;&lt;/a&gt;    &lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"/opt/myapp/&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;/pid"&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="n"&gt;env&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;envname&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-211" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-211" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-211"&gt;&lt;/a&gt;    &lt;span class="n"&gt;pid&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;re&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;search&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sa"&gt;r&lt;/span&gt;&lt;span class="s1"&gt;'\d+'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;getvalue&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;group&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-212" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-212" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-212"&gt;&lt;/a&gt;    &lt;span class="n"&gt;run&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"ps aux | grep gunicorn | grep &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt; | grep master | grep -v grep | awk '{print $2}'"&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="n"&gt;env&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;envname&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-213" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-213" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-213"&gt;&lt;/a&gt;    &lt;span class="n"&gt;run&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"kill -HUP &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;"&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="n"&gt;pid&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-214" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-214" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-214"&gt;&lt;/a&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-215" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-215" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-215"&gt;&lt;/a&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-216" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-216" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-216"&gt;&lt;/a&gt;&lt;span class="nd"&gt;@env_update&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-217" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-217" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-217"&gt;&lt;/a&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;restart&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-218" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-218" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-218"&gt;&lt;/a&gt;    &lt;span class="sd"&gt;"""&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-219" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-219" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-219"&gt;&lt;/a&gt;&lt;span class="sd"&gt;    Hard restarts specified servers&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-220" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-220" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-220"&gt;&lt;/a&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-221" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-221" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-221"&gt;&lt;/a&gt;&lt;span class="sd"&gt;    """&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-222" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-222" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-222"&gt;&lt;/a&gt;    &lt;span class="n"&gt;bundle_media&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-223" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-223" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-223"&gt;&lt;/a&gt;    &lt;span class="n"&gt;run&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"ps aux | grep gunicorn | grep &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt; | grep master | grep -v grep | awk '{print $2}'"&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="n"&gt;env&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;envname&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-224" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-224" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-224"&gt;&lt;/a&gt;    &lt;span class="n"&gt;run&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"supervisorctl stop myapp-&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt; &amp;amp;&amp;amp; supervisorctl start MyApp-&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;"&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;env&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;envname&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;env&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;envname&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-225" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-225" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-225"&gt;&lt;/a&gt;    &lt;span class="n"&gt;run&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"ps aux | grep gunicorn | grep &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt; | grep master | grep -v grep | awk '{print $2}'"&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="n"&gt;env&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;envname&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-226" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-226" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-226"&gt;&lt;/a&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-227" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-227" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-227"&gt;&lt;/a&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-228" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-228" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-228"&gt;&lt;/a&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;help&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-229" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-229" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-229"&gt;&lt;/a&gt;    &lt;span class="n"&gt;fabric_functions&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;'run'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'execute'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'local'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'func_wrapper'&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-230" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-230" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-230"&gt;&lt;/a&gt;    &lt;span class="n"&gt;functions&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;set&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="n"&gt;obj&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="vm"&gt;__name__&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;obj&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="vm"&gt;__name__&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;fabric_functions&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="s1"&gt;''&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;obj&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-231" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-231" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-231"&gt;&lt;/a&gt;                     &lt;span class="n"&gt;inspect&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;getmembers&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;sys&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;modules&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="vm"&gt;__name__&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;inspect&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;isfunction&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;obj&lt;/span&gt;&lt;span class="p"&gt;)])&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-232" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-232" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-232"&gt;&lt;/a&gt;    &lt;span class="n"&gt;functions&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;remove&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;''&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-233" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-233" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-233"&gt;&lt;/a&gt;    &lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="s2"&gt;"usage: &lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s2"&gt;  fab [host/grcompany of hosts] [commands] (optional command with arguments command:kwarg=val,arg1,arg2,arg3)"&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-234" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-234" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-234"&gt;&lt;/a&gt;    &lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="s2"&gt;"&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s2"&gt;available servers:"&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-235" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-235" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-235"&gt;&lt;/a&gt;    &lt;span class="n"&gt;list_hosts&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-236" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-236" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-236"&gt;&lt;/a&gt;    &lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="s2"&gt;"&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s2"&gt;commands:&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s2"&gt;  &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;"&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="s1"&gt;', '&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;join&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;functions&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-237" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-237" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-237"&gt;&lt;/a&gt;    &lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="s2"&gt;"&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s2"&gt;examples:&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s2"&gt;  staging svnxapp:app=holdings_and_quotes,layout.py,permissions.py restart"&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-238" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-238" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-238"&gt;&lt;/a&gt;    &lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="s2"&gt;"  fab test restart"&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-239" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-239" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-239"&gt;&lt;/a&gt;    &lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="s2"&gt;"  fab staging svnxapp:app=holdings_and_quotes,lib/quote.py,layout.py,models.py"&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-240" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-240" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-240"&gt;&lt;/a&gt;    &lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="s2"&gt;"  fab staging svnxapp:app=holdings_and_quotes,lib/quote.py restart"&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-241" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-241" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-241"&gt;&lt;/a&gt;    &lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="s2"&gt;"  fab test build"&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-242" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-242" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-242"&gt;&lt;/a&gt;    &lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="s2"&gt;"  fab test bundle_media restart"&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-243" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-243" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-243"&gt;&lt;/a&gt;    &lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="s2"&gt;" For svnx whole app (comma in the end):"&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-244" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-244" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-244"&gt;&lt;/a&gt;    &lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="s2"&gt;"  fab test svnxapp:app=medrep,"&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-245" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-245" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-245"&gt;&lt;/a&gt;    &lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="s2"&gt;" For global lib:"&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-246" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-246" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-246"&gt;&lt;/a&gt;    &lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="s2"&gt;"  fab test svnxlib"&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-247" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-247" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-247"&gt;&lt;/a&gt;    &lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="s2"&gt;" For whole global media:"&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-248" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-248" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-248"&gt;&lt;/a&gt;    &lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="s2"&gt;"  fab test svnxmedia:"&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-249" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-249" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-249"&gt;&lt;/a&gt;    &lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="s2"&gt;" For global media file:"&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-250" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-250" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-250"&gt;&lt;/a&gt;    &lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="s2"&gt;"  fab test svnxmedia:javascript"&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-251" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-251" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-251"&gt;&lt;/a&gt;    &lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="s2"&gt;"  fab test svnxmedia:javascript/company/checklist.js"&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-252" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-252" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-252"&gt;&lt;/a&gt;    &lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="s2"&gt;"&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s2"&gt;If .js file in args like : fab staging svnxapp:app=holdings_and_quotes,media/js/quote.js,layout.py,models.py"&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-253" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-253" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-253"&gt;&lt;/a&gt;    &lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="s2"&gt;"It will bundle media itself"&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-254" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-254" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-254"&gt;&lt;/a&gt;    &lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="s2"&gt;"Restart test staging without params:&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s2"&gt;  fab restart"&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-255" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-255" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-255"&gt;&lt;/a&gt;    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;functions&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-256" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-256" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-256"&gt;&lt;/a&gt;        &lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-257" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-257" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-257"&gt;&lt;/a&gt;        &lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="nb"&gt;globals&lt;/span&gt;&lt;span class="p"&gt;()[&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="vm"&gt;__doc__&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-258" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-258" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-258"&gt;&lt;/a&gt;        &lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="s2"&gt;"&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s2"&gt;"&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-259" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-259" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-259"&gt;&lt;/a&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-260" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-260" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-260"&gt;&lt;/a&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-261" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-261" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-261"&gt;&lt;/a&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-262" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-262" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-262"&gt;&lt;/a&gt;&lt;span class="nd"&gt;@env_update&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-263" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-263" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-263"&gt;&lt;/a&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;accessguni&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-264" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-264" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-264"&gt;&lt;/a&gt;    &lt;span class="n"&gt;run&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"tail /var/log/myapp/access-&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;.log"&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="n"&gt;env&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;envname&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;upper&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-265" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-265" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-265"&gt;&lt;/a&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-266" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-266" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-266"&gt;&lt;/a&gt;&lt;span class="nd"&gt;@env_update&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-267" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-267" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-267"&gt;&lt;/a&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;accessgunilive&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-268" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-268" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-268"&gt;&lt;/a&gt;    &lt;span class="n"&gt;run&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"tail -f /var/log/myapp/access-&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;.log"&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="n"&gt;env&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;envname&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;upper&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-269" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-269" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-269"&gt;&lt;/a&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-270" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-270" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-270"&gt;&lt;/a&gt;&lt;span class="nd"&gt;@env_update&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-271" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-271" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-271"&gt;&lt;/a&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;errorguni&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-272" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-272" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-272"&gt;&lt;/a&gt;    &lt;span class="n"&gt;run&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"tail /var/log/myapp/error-&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s2"&gt;.log"&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="n"&gt;env&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;envname&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;upper&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-273" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-273" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-273"&gt;&lt;/a&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-274" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-274" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-274"&gt;&lt;/a&gt;&lt;span class="nd"&gt;@env_update&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-275" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-275" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-275"&gt;&lt;/a&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;errorgunilive&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-276" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-276" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-276"&gt;&lt;/a&gt;    &lt;span class="n"&gt;run&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"tail -f /var/log/myapp/error.log"&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="n"&gt;env&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;envname&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;upper&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-277" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-277" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-277"&gt;&lt;/a&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-278" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-278" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-278"&gt;&lt;/a&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;hostname&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-279" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-279" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-279"&gt;&lt;/a&gt;    &lt;span class="n"&gt;run&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'uname -a'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-280" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-280" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-280"&gt;&lt;/a&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-281" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-281" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-281"&gt;&lt;/a&gt;&lt;span class="nd"&gt;@env_update&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-282" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-282" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-282"&gt;&lt;/a&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;uptime&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
&lt;a id="rest_code_f156e956ff6a4dbba9de314cd57dc702-283" name="rest_code_f156e956ff6a4dbba9de314cd57dc702-283" href="https://stencel.io/posts/fabric-auto-deployment-script.html#rest_code_f156e956ff6a4dbba9de314cd57dc702-283"&gt;&lt;/a&gt;    &lt;span class="n"&gt;run&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'uptime'&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;</description><category>DevOps</category><category>fabric</category><guid>https://stencel.io/posts/fabric-auto-deployment-script.html</guid><pubDate>Wed, 02 Nov 2016 14:45:29 GMT</pubDate></item><item><title>Fabric</title><link>https://stencel.io/posts/fabric.html</link><dc:creator>Greg Stencel</dc:creator><description>&lt;p&gt;fabric execution:::::
fab -H &lt;a class="reference external" href="mailto:me@host1"&gt;me@host1&lt;/a&gt;,me@host2,me@host3 function&lt;/p&gt;
Example:
&lt;small&gt;
fab -H greg@mmyserver.com get_backup
&lt;/small&gt;&lt;p&gt;or alternatively:&lt;/p&gt;
Example:
&lt;small&gt;
fab production1 deploy
&lt;/small&gt;

 but then you'll have to production1 defined inside your fabfile.py&lt;div class="code"&gt;&lt;pre class="code python"&gt;&lt;a id="rest_code_d121285bd368405cbf4a83e26e192777-1" name="rest_code_d121285bd368405cbf4a83e26e192777-1" href="https://stencel.io/posts/fabric.html#rest_code_d121285bd368405cbf4a83e26e192777-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;production&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
&lt;a id="rest_code_d121285bd368405cbf4a83e26e192777-2" name="rest_code_d121285bd368405cbf4a83e26e192777-2" href="https://stencel.io/posts/fabric.html#rest_code_d121285bd368405cbf4a83e26e192777-2"&gt;&lt;/a&gt;     &lt;span class="n"&gt;env&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;update&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;dict&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
&lt;a id="rest_code_d121285bd368405cbf4a83e26e192777-3" name="rest_code_d121285bd368405cbf4a83e26e192777-3" href="https://stencel.io/posts/fabric.html#rest_code_d121285bd368405cbf4a83e26e192777-3"&gt;&lt;/a&gt;         &lt;span class="n"&gt;dest&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;'production'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a id="rest_code_d121285bd368405cbf4a83e26e192777-4" name="rest_code_d121285bd368405cbf4a83e26e192777-4" href="https://stencel.io/posts/fabric.html#rest_code_d121285bd368405cbf4a83e26e192777-4"&gt;&lt;/a&gt;         &lt;span class="n"&gt;hosts&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;'some_ip_address'&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;
&lt;a id="rest_code_d121285bd368405cbf4a83e26e192777-5" name="rest_code_d121285bd368405cbf4a83e26e192777-5" href="https://stencel.io/posts/fabric.html#rest_code_d121285bd368405cbf4a83e26e192777-5"&gt;&lt;/a&gt; &lt;span class="p"&gt;))&lt;/span&gt;
&lt;a id="rest_code_d121285bd368405cbf4a83e26e192777-6" name="rest_code_d121285bd368405cbf4a83e26e192777-6" href="https://stencel.io/posts/fabric.html#rest_code_d121285bd368405cbf4a83e26e192777-6"&gt;&lt;/a&gt;
&lt;a id="rest_code_d121285bd368405cbf4a83e26e192777-7" name="rest_code_d121285bd368405cbf4a83e26e192777-7" href="https://stencel.io/posts/fabric.html#rest_code_d121285bd368405cbf4a83e26e192777-7"&gt;&lt;/a&gt; &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;development&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
&lt;a id="rest_code_d121285bd368405cbf4a83e26e192777-8" name="rest_code_d121285bd368405cbf4a83e26e192777-8" href="https://stencel.io/posts/fabric.html#rest_code_d121285bd368405cbf4a83e26e192777-8"&gt;&lt;/a&gt;     &lt;span class="n"&gt;env&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;update&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;dict&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
&lt;a id="rest_code_d121285bd368405cbf4a83e26e192777-9" name="rest_code_d121285bd368405cbf4a83e26e192777-9" href="https://stencel.io/posts/fabric.html#rest_code_d121285bd368405cbf4a83e26e192777-9"&gt;&lt;/a&gt;         &lt;span class="n"&gt;dest&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;'development'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a id="rest_code_d121285bd368405cbf4a83e26e192777-10" name="rest_code_d121285bd368405cbf4a83e26e192777-10" href="https://stencel.io/posts/fabric.html#rest_code_d121285bd368405cbf4a83e26e192777-10"&gt;&lt;/a&gt;         &lt;span class="n"&gt;hosts&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;'localhost'&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;
&lt;a id="rest_code_d121285bd368405cbf4a83e26e192777-11" name="rest_code_d121285bd368405cbf4a83e26e192777-11" href="https://stencel.io/posts/fabric.html#rest_code_d121285bd368405cbf4a83e26e192777-11"&gt;&lt;/a&gt; &lt;span class="p"&gt;))&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;local&lt;/strong&gt; - execute a local command means host from which we launch fabric&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;run&lt;/strong&gt;   - execute a remote command on all specified hosts, user-level permissions&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;sudo&lt;/strong&gt; - sudo a command on the remote server)&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;put&lt;/strong&gt; - copy over a local file to a remote destination)&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;get&lt;/strong&gt; - download a file from the remote server)&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;prompt&lt;/strong&gt; - prompt user with text and return the input (like raw_input))&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;reboot&lt;/strong&gt; - reboot the remote system, disconnect, and wait for wait seconds)&lt;/p&gt;
&lt;p&gt;Download some logs&lt;/p&gt;
&lt;p&gt;get(remote_path="/tmp/log_extracts.tar.gz", local_path="/logs/new_log.tar.gz")&lt;/p&gt;</description><category>DevOps</category><category>fabric</category><guid>https://stencel.io/posts/fabric.html</guid><pubDate>Sun, 08 Jun 2014 14:11:35 GMT</pubDate></item></channel></rss>