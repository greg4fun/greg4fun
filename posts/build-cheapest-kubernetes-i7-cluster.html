<!DOCTYPE html>
<html prefix="        og: http://ogp.me/ns# article: http://ogp.me/ns/article#     " vocab="http://ogp.me/ns" lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<title>Build cheapest kubernetes i7 cluster | Greg's Tech Notes</title>
<link href="https://fonts.googleapis.com/css?family=Bitter:400,400i,700" rel="stylesheet" type="text/css">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
<link href="../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" hreflang="en" href="../rss.xml">
<link rel="canonical" href="https://stencel.io/posts/build-cheapest-kubernetes-i7-cluster.html">
<!--[if lt IE 9]><script src="../assets/js/html5shiv-printshiv.min.js"></script><![endif]--><meta name="author" content="Greg Stencel">
<link rel="prev" href="mysql-on-kubernetes-with-persistent-volume-and-secrets.html" title="Mysql on kubernetes with persistent volume and secrets" type="text/html">
<meta property="og:site_name" content="Greg's Tech Notes">
<meta property="og:title" content="Build cheapest kubernetes i7 cluster">
<meta property="og:url" content="https://stencel.io/posts/build-cheapest-kubernetes-i7-cluster.html">
<meta property="og:description" content="How I've build 4 nodes kubernetes i7 16GB cluster
I always wanted to build my own k8s cluster, but couldn't see any reliable &quot;budget&quot; 3-4 nodes option to go for -yes there are a
lot of attempts of bui">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2021-01-18T23:58:56Z">
</head>
<body>
    <a href="#page-content" class="sr-only sr-only-focusable">Skip to main content</a>
    
    <section class="social"><ul>
<li><p style="color:#fff;font-size:3em;">stencel.io</p></li>
        <li><p style="color:#fff;font-size:2em;">greg's tech notes</p></li>
            <li>
                <a href="https://stencel.io/">
                    <img src="../images/aboutme.png" alt="Greg's Tech Notes" id="logo"></a>
            </li>
        
            <li><a href="../index.html" title="Home"><i class="fa fa-home"></i></a></li>
            <li><a href="../archive.html" title="Archives"><i class="fa fa-folder-open"></i></a></li>
            <li><a href="../categories/index.html" title="Tags"><i class="fa fa-tags"></i></a></li>
            <li><a href="https://www.linkedin.com/in/gregstencel/" title="My Linkedin"><i class="fab fa-linkedin"></i></a></li>
            <li><a href="https://github.com/greg4fun" title="My Github"><i class="fab fa-github"></i></a></li>
    
    

        </ul></section><section class="page-content"><div class="content" rel="main">
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="#" class="u-url">Build cheapest kubernetes i7 cluster</a></h1>

        <div class="metadata">
            <p class="dateline"><a href="#" rel="bookmark"><i class="fa fa-clock"></i> <time class="published dt-published" datetime="2021-01-18T23:58:56Z" itemprop="datePublished" title="2021-01-18 23:58">2021-01-18 23:58</time></a></p>
            <p class="byline author vcard"> <i class="fa fa-user"></i> <span class="byline-name fn" itemprop="author">
                    Greg Stencel
            </span></p>
                <p class="commentline"><i class="far fa-comment"></i>
        
    <a href="build-cheapest-kubernetes-i7-cluster.html#disqus_thread" data-disqus-identifier="cache/posts/build-cheapest-kubernetes-i7-cluster.html">Comments</a>


            
        </p>
<p class="sourceline"><a href="build-cheapest-kubernetes-i7-cluster.rst" class="sourcelink"><i class="fa fa-file-code"></i> Source</a></p>

            

            

        </div>
    </header><div class="e-content entry-content" itemprop="articleBody text">
    <div class="section" id="how-i-ve-build-4-nodes-kubernetes-i7-16gb-cluster">
<h2>How I've build 4 nodes kubernetes i7 16GB cluster</h2>
<p>I always wanted to build my own k8s cluster, but couldn't see any reliable "budget" 3-4 nodes option to go for -yes there are a
lot of attempts of building kubernetes which are:</p>
<ul class="simple">
<li><p>raspberry pi which are not  x86 compatible so you wont run a lot of docker images there</p></li>
<li><p>some tv hdmi sticks - they are quite good but cpus are quite weak.</p></li>
</ul>
<p>So one day my laptops display has broken. It was i7 with 16gb RAM it I have identified malfunction was was the port to lcd display on the motherboard as the hdmi output worked fine. I have replaced the motherboard and doing so I had the old spare but kida headless without display well hdmi output still worked).
Also when buying replacement motherboard  I have discovered there are sold for 100 quid (coming from some after leasing refurbished laptops) so probably the cheapes k8s cluster we can have on i7's and 16GB RAM per node.</p>
<img alt="/images/IMG_20201024_184958.jpg" src="../images/IMG_20201024_184958.jpg"><p>The parts:</p>
<p>3 x £120 Lenovo Yoga X1 Carbon 00JT811 Core i7-6600U 2.6GHz Laptop Motherboard [from ebay]</p>
<p>4 x £12.93 Sandisk 120GB SSD [from Amazon warehouse deals] - optional could do it network bootable!!!</p>
<p>4 x lenovo laptop chargin adapters (had old ones so didnt have top buy)</p>
<p>3 x 1GB Ethernet over oneLink+ interface (7each)</p>
<p>1 x 1GB Ethernet over OneLink+ dock station (I had old one)</p>
<p>1 x used battery for master node (to secure etcd even better from power failure) £10</p>
<p>1 x Server Case to pack it up 2U Short ATX Chassis - Low Profile PCI Card Support - 390mm Depth £47</p>
<p>Overall : £489</p>
<p>I had old intell skull i7 as my previous lab server so I have sold it for £400 so in the end by just adding 89 quid and week of work during evenings I had 4 nodes powerfull kubernetes
cluster.</p>
<div class="section" id="problem-i-how-to-stack-it-on-each-other">
<h3>Problem I - How to stack it on each other?</h3>
<p>I had to find some way how to put the motherboards on each other safetly - fortunately I had ender3 3dprinter and bit of
knowledge of 3d prototyping in blender so I have just designed simple pins on which I sould stack the motherboards.</p>
<img alt="/images/IMG_20201013_144202.jpg" src="../images/IMG_20201013_144202.jpg"><img alt="/images/IMG_20201016_172922.jpg" src="../images/IMG_20201016_172922.jpg">
</div>
<div class="section" id="problem-ii-powering-it-on">
<h3>Problem II - Powering it on</h3>
<p>Solution 1 - BIOS Restore on AC Power loss - just pluggin in to power adapter should power on my motherboards
Solution 2 - Add power button - unfortunatelly its almost impossibile to buy power button separately for this
motherboard they are available on aliexpress for 17 quid which is ridiculous.</p>
<p>I had found 1 button for 5 on ebay and have reverse engineered it.</p>
<p>So Laptop power on switch works bit different than I though its not working like in PC ATX switch just short circuiting
2 cables - I had to check with multimeter whats happening on which pins of the port of power switch.
It turned out its just adding 10kOhm resitance on button press. I have just created my own buttons and added the
resistors to each of them.</p>
<img alt="/images/IMG_20201114_160524.jpg" src="../images/IMG_20201114_160524.jpg"><img alt="/images/IMG_20201107_23234122.jpg" src="../images/IMG_20201107_23234122.jpg"><img alt="/images/IMG_20201030_21072011.jpg" src="../images/IMG_20201030_21072011.jpg"><p>I had to do my own buttons too as case came with 2 buttons and 2 led diodes I just took off whole pcb and made my own
with just buttons and printed out the plastic long buttons.
Also added external usb3 extensions</p>
<img alt="/images/IMG_20201107_232356.jpg" src="../images/IMG_20201107_232356.jpg">
</div>
<div class="section" id="problem-3-ethernet">
<h3>Problem 3 Ethernet</h3>
<p>I wanted it to look nice so I have designed some panel to put into server case and connect all the ethernet adapters +
docking station together.</p>
<img alt="/images/IMG_20201020_173526.jpg" src="../images/IMG_20201020_173526.jpg"><img alt="/images/IMG_20201020_173919.jpg" src="../images/IMG_20201020_173919.jpg"><img alt="/images/IMG_20201024_180934.jpg" src="../images/IMG_20201024_180934.jpg"><img alt="/images/IMG_20201026_220703.jpg" src="../images/IMG_20201026_220703.jpg">
</div>
<div class="section" id="connecting-it-all-together-inside-the-server-case">
<h3>Connecting it all together inside the server case</h3>
<p>Having all the parts printed and ready I've started assembling everything together which was the biggest fun.</p>
<img alt="/images/IMG_20201026_221755_1.jpg" src="../images/IMG_20201026_221755_1.jpg"><img alt="/images/IMG_20201023_162733.jpg" src="../images/IMG_20201023_162733.jpg"><img alt="/images/IMG_20201023_162735.jpg" src="../images/IMG_20201023_162735.jpg"><img alt="/images/IMG_20201122_134807.jpg" src="../images/IMG_20201122_134807.jpg">
</div>
<div class="section" id="final-effects">
<h3>Final effects</h3>
<p>So in the end this little 2U box is i7 16GB x4NODES kubernetes cluster!!!</p>
<img alt="/images/IMG_20210121_234056.jpg" src="../images/IMG_20210121_234056.jpg">
</div>
<div class="section" id="clarification">
<h3>Clarification</h3>
<p>Of course I forgot to mention (intentionally or not to lower overall costs :)  ) the extra 2U case didnt fit to my 9U
Cabinet anymore as there is Dream Machine Pro and some PoE Switch and a NAS there already so  I had to buy bigger server cabinet 15U</p>
<p>Because of that I had to hire some external contractor to assembe it.</p>
<p>So this costed me 2 extra hrs spent at playground + 2 kinder surprise eggs.</p>
<img alt="/images/IMG_20201121_113644.jpg" src="../images/IMG_20201121_113644.jpg"><p>So inside case it looks like this</p>
<img alt="/images/IMG_20201205_185254.jpg" src="../images/IMG_20201205_185254.jpg"><p>And everything connected together</p>
<img alt="/images/IMG_20201229_180451.jpg" src="../images/IMG_20201229_180451.jpg"><img alt="/images/IMG-20210107-WA0012.jpeg" src="../images/IMG-20210107-WA0012.jpeg"><img alt="/images/IMG-20210107-WA0010.jpeg" src="../images/IMG-20210107-WA0010.jpeg"><img alt="/images/IMG-20201123-WA0000.jpeg" src="../images/IMG-20201123-WA0000.jpeg">
</div>
<div class="section" id="future-plans">
<h3>Future plans</h3>
<p>As seen on photos there are leds - this is Philips Hue strip I have allready played with python API and I'm going to
connect those leds to the Master node temperature readings.</p>
</div>
</div>
    </div>
    <aside class="postpromonav"><nav><ul class="pager hidden-print">
<li class="previous">
                <a href="mysql-on-kubernetes-with-persistent-volume-and-secrets.html" rel="prev" title="Mysql on kubernetes with persistent volume and secrets">Previous post</a>
            </li>
        </ul></nav></aside><section class="comments hidden-print"><h2>Comments</h2>
        
        
        <div id="disqus_thread"></div>
        <script>
        var disqus_shortname ="stencel",
            disqus_url="https://stencel.io/posts/build-cheapest-kubernetes-i7-cluster.html",
        disqus_title="Build cheapest kubernetes i7 cluster",
        disqus_identifier="cache/posts/build-cheapest-kubernetes-i7-cluster.html",
        disqus_config = function () {
            this.language = "en";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.async = true;
            dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>
    <a href="https://disqus.com" class="dsq-brlink" rel="nofollow">Comments powered by <span class="logo-disqus">Disqus</span></a>


        </section></article><script>var disqus_shortname="stencel";(function(){var a=document.createElement("script");a.async=true;a.src="https://"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script><footer id="footer"><p>Contents © 2021         <a href="mailto:gstencel@gmail.com">Greg Stencel</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>         </p>
            
        </footer>
</div>
    </section><script src="../assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-50641127-1', 'stencel.io');
  ga('send', 'pageview');

</script><script type="text/javascript" src="../assets/js/tipuesearch_set.js"></script><script type="text/javascript" src="../assets/js/tipuesearch.js"></script><script type="text/javascript">
$(document).ready(function() {
     $('#tipue_search_input').tipuesearch({
         'mode': 'json',
         'contentLocation': '/assets/js/tipuesearch_content.json',
         'showUrl': false
     });
});
</script>
</body>
</html>
